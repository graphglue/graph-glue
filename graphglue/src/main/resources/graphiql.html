<!DOCTYPE html>
<html>

<head>
    <style>
        body {
            height: 100%;
            margin: 0;
            width: 100%;
            overflow: hidden;
        }
        
        #graphiql {
            height: 100vh;
        }
    </style>
    <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/graphiql/graphiql.min.css" />
</head>

<body>
    <div id="graphiql">Loading...</div>
    <script src="https://unpkg.com/graphiql/graphiql.min.js" type="application/javascript"></script>
    <script crossorigin src="https://unpkg.com/@graphiql/plugin-explorer/dist/graphiql-plugin-explorer.umd.js"></script>
    <script>
        const gqlFetcher = GraphiQL.createFetcher({
            url: '${graphQLEndpoint}',
            subscriptionUrl: '${subscriptionsEndpoint}'
        });

        function GraphiQLWithExplorer() {
            var [query, setQuery] = React.useState(
                '',
            );
            var explorerPlugin = GraphiQLPluginExplorer.useExplorerPlugin({
                query: query,
                onEdit: setQuery,
            })
            return React.createElement(GraphiQL, {
                fetcher: gqlFetcher,
                defaultVariableEditorOpen: true,
                headerEditorEnabled: true,
                shouldPersistHeaders: true,
                plugins: [explorerPlugin],
                query: query,
                onEditQuery: setQuery
            })
        }

        ReactDOM.render(
            React.createElement(GraphiQLWithExplorer),
            document.getElementById('graphiql'),
        );
    </script>
</body>

</html>